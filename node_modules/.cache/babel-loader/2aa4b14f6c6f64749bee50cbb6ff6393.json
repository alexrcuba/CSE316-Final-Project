{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\pokeg\\\\Documents\\\\hw3_sample_solution1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\pokeg\\\\Documents\\\\hw3_sample_solution1\\\\src\\\\components\\\\edit_screen\\\\ListScreen.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport ItemsList from './ItemsList.js';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { getFirestore } from 'redux-firestore';\nimport { Modal, Button } from 'react-materialize';\n\nclass ListScreen extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: '',\n      owner: ''\n    };\n    this.sortCriteria = 'none';\n    this.changedTime = false;\n\n    this.updateTime = () => {\n      console.log(\"updating time\");\n      let fireStore = getFirestore();\n      fireStore.collection('todoLists').doc(this.props.todoList.id).update({\n        time: Date.now()\n      });\n    };\n\n    this.handleChange = e => {\n      const target = e.target;\n      this.setState(state => _objectSpread({}, state, {\n        [target.id]: target.value\n      }));\n      const fireStore = getFirestore();\n      let dbitem = fireStore.collection('todoLists').doc(this.props.todoList.id);\n      dbitem.update({\n        [target.id]: target.value\n      });\n    };\n\n    this.addItem = () => {\n      console.log(\"Adding a new item\");\n      this.props.history.push({\n        pathname: this.props.todoList.id + \"/item/\" + this.props.todoList.items.length\n      });\n    };\n\n    this.deleteList = () => {\n      let fireStore = getFirestore();\n      fireStore.collection('todoLists').doc(this.props.todoList.id).delete().then(function () {\n        console.log(\"Document successfully deleted!\");\n      }).catch(function (error) {\n        console.error(\"Error removing document: \", error);\n      });\n      this.props.history.goBack();\n    };\n\n    this.sortByDescription = () => {\n      if (this.sortCriteria !== SORT_BY_TASK_INCREASING) this.sortCriteria = SORT_BY_TASK_INCREASING;else this.sortCriteria = SORT_BY_TASK_DECREASING;\n      this.sortList(this.sortCriteria);\n    };\n\n    this.sortByDueDate = () => {\n      if (this.sortCriteria !== SORT_BY_DUE_DATE_INCREASING) this.sortCriteria = SORT_BY_DUE_DATE_INCREASING;else this.sortCriteria = SORT_BY_DUE_DATE_DECREASING;\n      this.sortList(this.sortCriteria);\n    };\n\n    this.sortByCompleted = () => {\n      if (this.sortCriteria !== SORT_BY_STATUS_INCREASING) this.sortCriteria = SORT_BY_STATUS_INCREASING;else this.sortCriteria = SORT_BY_STATUS_DECREASING;\n      this.sortList(this.sortCriteria);\n    };\n\n    this.sortList = criteria => {\n      console.log(\"Sorting by: \", this.sortCriteria);\n      let newItems = this.generateItemsInSortedOrder(criteria);\n\n      for (let i = 0; i < newItems.length; i++) {\n        newItems[i].key = i;\n        newItems[i].id = i;\n      }\n\n      let firestore = getFirestore();\n      firestore.collection(\"todoLists\").doc(this.props.todoList.id).update({\n        items: newItems\n      });\n    };\n\n    this.generateItemsInSortedOrder = criteria => {\n      let newItems = Object.assign([], this.props.todoList.items);\n      newItems.sort(function (a, b) {\n        if (criteria === SORT_BY_TASK_INCREASING) return a.description.localeCompare(b.description);else if (criteria === SORT_BY_TASK_DECREASING) return b.description.localeCompare(a.description);else if (criteria === SORT_BY_DUE_DATE_INCREASING) return a.due_date.localeCompare(b.due_date);else if (criteria === SORT_BY_DUE_DATE_DECREASING) return b.due_date.localeCompare(a.due_date);else if (criteria === SORT_BY_STATUS_INCREASING) return (\"\" + a.completed).localeCompare(\"\" + b.completed);else return (\"\" + b.completed).localeCompare(\"\" + a.completed);\n      });\n      return newItems;\n    };\n  }\n\n  render() {\n    const auth = this.props.auth;\n    let todoList = this.props.todoList;\n\n    if (!auth.uid) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      });\n    }\n\n    if (!todoList) return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    });\n\n    if (!this.changedTime) {\n      this.changedTime = true;\n      this.updateTime();\n    }\n\n    return React.createElement(\"div\", {\n      className: \"grey lighten-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row margin_bottom_-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"grey-text text-darken-3 col s10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Todo List\"), React.createElement(\"div\", {\n      className: \"col s1 center-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"btn-floating btn-large waves-effect waves-light purple lighten-2 hoverable\",\n      onClick: this.addItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"add\"))), React.createElement(\"div\", {\n      className: \"col s1 center-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"btn-floating btn-large waves-effect waves-light red accent-2 hoverable modal-trigger\",\n      href: \"#modal1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"delete\")))), React.createElement(\"div\", {\n      className: \"padding_20 row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-field col s6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"active text_16\",\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"List Name\"), React.createElement(\"input\", {\n      className: \"text_20\",\n      type: \"text\",\n      name: \"name\",\n      id: \"name\",\n      onChange: this.handleChange,\n      defaultValue: todoList.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-field col s6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"active text_16\",\n      htmlFor: \"owner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"List Owner\"), React.createElement(\"input\", {\n      className: \"text_20\",\n      type: \"text\",\n      name: \"owner\",\n      id: \"owner\",\n      onChange: this.handleChange,\n      defaultValue: todoList.owner,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row red accent-2 rounded list_section_header \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s3 left-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"list_sort_header padding_12\",\n      onClick: this.sortByDescription,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Description\"))), React.createElement(\"div\", {\n      className: \"col s3 center-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"list_sort_header\",\n      onClick: this.sortByDueDate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Due Date\"))), React.createElement(\"div\", {\n      className: \"col s3 right-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"list_sort_header padding_12\",\n      onClick: this.sortByCompleted,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Completed\")))), React.createElement(ItemsList, {\n      addItem: this.addItem,\n      todoList: todoList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      id: \"modal1\",\n      header: \"Delete List?\",\n      actions: React.createElement(\"div\", {\n        className: \"grey lighten-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"red accent-2\",\n        tooltip: \"The list will not be retrievable.\",\n        tooltipOptions: {\n          position: 'top'\n        },\n        onClick: this.deleteList,\n        modal: \"close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Yes\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"  \"), React.createElement(Button, {\n        className: \"purple lighten-2\",\n        modal: \"close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"No\")),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Are you sure you want to delete this list?\")))));\n  }\n\n}\n\nconst SORT_BY_TASK_INCREASING = 'sort_by_task_increasing';\nconst SORT_BY_TASK_DECREASING = 'sort_by_task_decreasing';\nconst SORT_BY_DUE_DATE_INCREASING = 'sort_by_due_date_increasing';\nconst SORT_BY_DUE_DATE_DECREASING = 'sort_by_due_date_decreasing';\nconst SORT_BY_STATUS_INCREASING = 'sort_by_status_increasing';\nconst SORT_BY_STATUS_DECREASING = 'sort_by_status_decreasing';\n\nconst mapStateToProps = (state, ownProps) => {\n  const id = ownProps.match.params.id;\n  const todoLists = state.firestore.data.todoLists;\n  const todoList = todoLists ? todoLists[id] : null;\n  if (todoList) todoList.id = id;\n  return {\n    todoList,\n    auth: state.firebase.auth\n  };\n};\n\nexport default compose(connect(mapStateToProps), firestoreConnect([{\n  collection: 'todoLists'\n}]))(ListScreen);","map":{"version":3,"sources":["C:/Users/pokeg/Documents/hw3_sample_solution1/src/components/edit_screen/ListScreen.js"],"names":["React","Component","Redirect","connect","compose","ItemsList","firestoreConnect","getFirestore","Modal","Button","ListScreen","state","name","owner","sortCriteria","changedTime","updateTime","console","log","fireStore","collection","doc","props","todoList","id","update","time","Date","now","handleChange","e","target","setState","value","dbitem","addItem","history","push","pathname","items","length","deleteList","delete","then","catch","error","goBack","sortByDescription","SORT_BY_TASK_INCREASING","SORT_BY_TASK_DECREASING","sortList","sortByDueDate","SORT_BY_DUE_DATE_INCREASING","SORT_BY_DUE_DATE_DECREASING","sortByCompleted","SORT_BY_STATUS_INCREASING","SORT_BY_STATUS_DECREASING","criteria","newItems","generateItemsInSortedOrder","i","key","firestore","Object","assign","sort","a","b","description","localeCompare","due_date","completed","render","auth","uid","position","mapStateToProps","ownProps","match","params","todoLists","data","firebase"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport ItemsList from './ItemsList.js'\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { getFirestore } from 'redux-firestore';\nimport { Modal, Button } from 'react-materialize';\n\nclass ListScreen extends Component {\n    state = {\n        name: '',\n        owner: '',\n    }\n\n    sortCriteria = 'none';\n    changedTime = false;\n\n    updateTime = () => {\n        console.log(\"updating time\")\n        let fireStore = getFirestore();\n        fireStore.collection('todoLists').doc(this.props.todoList.id).update({ time: Date.now() })\n    }\n\n    handleChange = (e) => {\n        const { target } = e;\n\n        this.setState(state => ({\n            ...state,\n            [target.id]: target.value,\n        }));\n\n        const fireStore = getFirestore();\n        let dbitem = fireStore.collection('todoLists').doc(this.props.todoList.id);\n        dbitem.update({ [target.id]: target.value });\n    }\n\n    addItem = () => {\n        console.log(\"Adding a new item\");\n        this.props.history.push({\n            pathname: this.props.todoList.id + \"/item/\" + this.props.todoList.items.length,\n        });\n    }\n\n    deleteList = () => {\n        let fireStore = getFirestore();\n        fireStore.collection('todoLists').doc(this.props.todoList.id).delete().then(function () {\n            console.log(\"Document successfully deleted!\");\n        }).catch(function (error) {\n            console.error(\"Error removing document: \", error);\n        });\n\n        this.props.history.goBack();\n    }\n\n    sortByDescription = () => {\n        if (this.sortCriteria !== SORT_BY_TASK_INCREASING)\n            this.sortCriteria = SORT_BY_TASK_INCREASING\n        else\n            this.sortCriteria = SORT_BY_TASK_DECREASING;\n        this.sortList(this.sortCriteria);\n    }\n\n    sortByDueDate = () => {\n        if (this.sortCriteria !== SORT_BY_DUE_DATE_INCREASING)\n            this.sortCriteria = SORT_BY_DUE_DATE_INCREASING;\n        else\n            this.sortCriteria = SORT_BY_DUE_DATE_DECREASING;\n        this.sortList(this.sortCriteria);\n    }\n\n    sortByCompleted = () => {\n        if (this.sortCriteria !== SORT_BY_STATUS_INCREASING)\n            this.sortCriteria = SORT_BY_STATUS_INCREASING;\n        else\n            this.sortCriteria = SORT_BY_STATUS_DECREASING;\n        this.sortList(this.sortCriteria);\n    }\n\n    sortList = (criteria) => {\n        console.log(\"Sorting by: \", this.sortCriteria);\n        let newItems = this.generateItemsInSortedOrder(criteria);\n        for (let i = 0; i < newItems.length; i++) {\n            newItems[i].key = i;\n            newItems[i].id = i;\n        }\n\n        let firestore = getFirestore();\n        firestore.collection(\"todoLists\").doc(this.props.todoList.id).update({ items: newItems });\n    }\n\n    generateItemsInSortedOrder = (criteria) => {\n        let newItems = Object.assign([], this.props.todoList.items);\n        newItems.sort(function (a, b) {\n            if (criteria === SORT_BY_TASK_INCREASING)\n                return a.description.localeCompare(b.description);\n            else if (criteria === SORT_BY_TASK_DECREASING)\n                return b.description.localeCompare(a.description);\n            else if (criteria === SORT_BY_DUE_DATE_INCREASING)\n                return a.due_date.localeCompare(b.due_date);\n            else if (criteria === SORT_BY_DUE_DATE_DECREASING)\n                return b.due_date.localeCompare(a.due_date);\n            else if (criteria === SORT_BY_STATUS_INCREASING)\n                return (\"\" + a.completed).localeCompare(\"\" + b.completed);\n            else\n                return (\"\" + b.completed).localeCompare(\"\" + a.completed);\n        });\n        return newItems;\n    }\n\n    render() {\n        const auth = this.props.auth;\n        let todoList = this.props.todoList;\n\n        if (!auth.uid) {\n            return <Redirect to=\"/\" />;\n        }\n\n        if (!todoList)\n            return <React.Fragment />\n\n        if (!this.changedTime) {\n            this.changedTime = true;\n            this.updateTime();\n        }\n\n        return (\n            <div className=\"grey lighten-2\">\n                <div className=\"row margin_bottom_-10\">\n                    <h4 className=\"grey-text text-darken-3 col s10\">Todo List</h4>\n                    <div className=\"col s1 center-align\">\n                        <h4 className=\"btn-floating btn-large waves-effect waves-light purple lighten-2 hoverable\"\n                            onClick={this.addItem}><i className=\"material-icons\">add</i></h4>\n                    </div>\n                    <div className=\"col s1 center-align\">\n                        <h4 className=\"btn-floating btn-large waves-effect waves-light red accent-2 hoverable modal-trigger\"\n                            href=\"#modal1\"><i className=\"material-icons\">delete</i></h4>\n                    </div>\n                </div>\n                <div className=\"padding_20 row\">\n                    <div className=\"input-field col s6\">\n                        <label className=\"active text_16\" htmlFor=\"name\">List Name</label>\n                        <input className=\"text_20\" type=\"text\" name=\"name\" id=\"name\" onChange={this.handleChange} defaultValue={todoList.name} />\n                    </div>\n                    <div className=\"input-field col s6\">\n                        <label className=\"active text_16\" htmlFor=\"owner\">List Owner</label>\n                        <input className=\"text_20\" type=\"text\" name=\"owner\" id=\"owner\" onChange={this.handleChange} defaultValue={todoList.owner} />\n                    </div>\n                </div>\n                <div className=\"row red accent-2 rounded list_section_header \">\n                    <div className=\"col s3 left-align\">\n                        <h5 className=\"list_sort_header padding_12\" onClick={this.sortByDescription}><b>Description</b></h5>\n                    </div>\n                    <div className=\"col s3 center-align\">\n                        <h5 className=\"list_sort_header\" onClick={this.sortByDueDate}><b>Due Date</b></h5>\n                    </div>\n                    <div className=\"col s3 right-align\">\n                        <h5 className=\"list_sort_header padding_12\" onClick={this.sortByCompleted}><b>Completed</b></h5>\n                    </div>\n                </div>\n                <ItemsList addItem={this.addItem} todoList={todoList} />\n                <div className=\"\">\n                    <Modal id=\"modal1\" header=\"Delete List?\" actions={\n                        <div className=\"grey lighten-2\">\n                            <Button className=\"red accent-2\" tooltip=\"The list will not be retrievable.\" tooltipOptions={{ position: 'top' }}\n                                onClick={this.deleteList} modal=\"close\">Yes</Button><span>  </span>\n                            <Button className=\"purple lighten-2\" modal=\"close\">No</Button>\n                        </div>}>\n                        <p><b>Are you sure you want to delete this list?</b></p>\n                    </Modal>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst SORT_BY_TASK_INCREASING = 'sort_by_task_increasing';\nconst SORT_BY_TASK_DECREASING = 'sort_by_task_decreasing';\nconst SORT_BY_DUE_DATE_INCREASING = 'sort_by_due_date_increasing';\nconst SORT_BY_DUE_DATE_DECREASING = 'sort_by_due_date_decreasing';\nconst SORT_BY_STATUS_INCREASING = 'sort_by_status_increasing';\nconst SORT_BY_STATUS_DECREASING = 'sort_by_status_decreasing';\n\nconst mapStateToProps = (state, ownProps) => {\n    const { id } = ownProps.match.params;\n    const { todoLists } = state.firestore.data;\n    const todoList = todoLists ? todoLists[id] : null;\n    if (todoList)\n        todoList.id = id;\n\n    return {\n        todoList,\n        auth: state.firebase.auth,\n    };\n};\n\nexport default compose(\n    connect(mapStateToProps),\n    firestoreConnect([\n        { collection: 'todoLists' },\n    ]),\n)(ListScreen);"]},"metadata":{},"sourceType":"module"}